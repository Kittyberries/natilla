#Grant advancement to every player (depending on gamemode and language)
execute if score language Config matches 0 if score gamemode Config matches 1 unless score recursionFix ItemsUpdate matches 1.. run advancement grant @a only ctmv:english/hard/minerals/redstone
execute if score language Config matches 0 if score gamemode Config matches 2 unless score recursionFix ItemsUpdate matches 1.. run advancement grant @a only ctmv:english/nightmare/minerals/redstone

execute if score language Config matches 1 if score gamemode Config matches 1 unless score recursionFix ItemsUpdate matches 1.. run advancement grant @a only ctmv:spanish/hard/minerals/redstone
execute if score language Config matches 1 if score gamemode Config matches 2 unless score recursionFix ItemsUpdate matches 1.. run advancement grant @a only ctmv:spanish/nightmare/minerals/redstone

#Call to the common function for all advancements (specifying wool)
execute if score gamemode Config matches 1..2 run scoreboard players set wool ItemsUpdate 21
execute if score gamemode Config matches 1..2 unless score recursionFix ItemsUpdate matches 1.. run function ctmv:obtain_item/reward

#Custom title and chat message
#ENGLISH - Normal mode - Hard mode
execute if score language Config matches 0 if score gamemode Config matches 1..2 if score recursionFix ItemsUpdate matches 0 if score minutes Timer matches ..9 if score seconds Timer matches ..9 run tellraw @a [{"text":"⚃","color":"#D60004"},{"text":" ⏵","color":"green"},{"text":" Block of Redstone","color":"#C1FFB8","bold":true},{"text":" obtained in ","color":"#C1FFB8"},{"score":{"name":"hours","objective":"Timer"},"color":"green","bold":true},{"text":":0","color":"green","bold":true},{"score":{"name":"minutes","objective":"Timer"},"color":"green","bold":true},{"text":":0","color":"green","bold":true},{"score":{"name":"seconds","objective":"Timer"},"color":"green","bold":true},{"text":"!","color":"#C1FFB8"}]
execute if score language Config matches 0 if score gamemode Config matches 1..2 if score recursionFix ItemsUpdate matches 0 if score minutes Timer matches ..9 if score seconds Timer matches 10.. run tellraw @a [{"text":"⚃","color":"#D60004"},{"text":" ⏵","color":"green"},{"text":" Block of Redstone","color":"#C1FFB8","bold":true},{"text":" obtained in ","color":"#C1FFB8"},{"score":{"name":"hours","objective":"Timer"},"color":"green","bold":true},{"text":":0","color":"green","bold":true},{"score":{"name":"minutes","objective":"Timer"},"color":"green","bold":true},{"text":":","color":"green","bold":true},{"score":{"name":"seconds","objective":"Timer"},"color":"green","bold":true},{"text":"!","color":"#C1FFB8"}]
execute if score language Config matches 0 if score gamemode Config matches 1..2 if score recursionFix ItemsUpdate matches 0 if score minutes Timer matches 10.. if score seconds Timer matches ..9 run tellraw @a [{"text":"⚃","color":"#D60004"},{"text":" ⏵","color":"green"},{"text":" Block of Redstone","color":"#C1FFB8","bold":true},{"text":" obtained in ","color":"#C1FFB8"},{"score":{"name":"hours","objective":"Timer"},"color":"green","bold":true},{"text":":","color":"green","bold":true},{"score":{"name":"minutes","objective":"Timer"},"color":"green","bold":true},{"text":":0","color":"green","bold":true},{"score":{"name":"seconds","objective":"Timer"},"color":"green","bold":true},{"text":"!","color":"#C1FFB8"}]
execute if score language Config matches 0 if score gamemode Config matches 1..2 if score recursionFix ItemsUpdate matches 0 if score minutes Timer matches 10.. if score seconds Timer matches 10.. run tellraw @a [{"text":"⚃","color":"#D60004"},{"text":" ⏵","color":"green"},{"text":" Block of Redstone","color":"#C1FFB8","bold":true},{"text":" obtained in ","color":"#C1FFB8"},{"score":{"name":"hours","objective":"Timer"},"color":"green","bold":true},{"text":":","color":"green","bold":true},{"score":{"name":"minutes","objective":"Timer"},"color":"green","bold":true},{"text":":","color":"green","bold":true},{"score":{"name":"seconds","objective":"Timer"},"color":"green","bold":true},{"text":"!","color":"#C1FFB8"}]

#SPANISH - Normal mode - Hard mode
execute if score language Config matches 1 if score gamemode Config matches 1..2 if score recursionFix ItemsUpdate matches 0 if score minutes Timer matches ..9 if score seconds Timer matches ..9 run tellraw @a [{"text":"⚃","color":"#D60004"},{"text":" ⏵","color":"green"},{"text":" Bloque de Redstone","color":"#C1FFB8","bold":true},{"text":" conseguido en ","color":"#C1FFB8"},{"score":{"name":"hours","objective":"Timer"},"color":"green","bold":true},{"text":":0","color":"green","bold":true},{"score":{"name":"minutes","objective":"Timer"},"color":"green","bold":true},{"text":":0","color":"green","bold":true},{"score":{"name":"seconds","objective":"Timer"},"color":"green","bold":true},{"text":"!","color":"#C1FFB8"}]
execute if score language Config matches 1 if score gamemode Config matches 1..2 if score recursionFix ItemsUpdate matches 0 if score minutes Timer matches ..9 if score seconds Timer matches 10.. run tellraw @a [{"text":"⚃","color":"#D60004"},{"text":" ⏵","color":"green"},{"text":" Bloque de Redstone","color":"#C1FFB8","bold":true},{"text":" conseguido en ","color":"#C1FFB8"},{"score":{"name":"hours","objective":"Timer"},"color":"green","bold":true},{"text":":0","color":"green","bold":true},{"score":{"name":"minutes","objective":"Timer"},"color":"green","bold":true},{"text":":","color":"green","bold":true},{"score":{"name":"seconds","objective":"Timer"},"color":"green","bold":true},{"text":"!","color":"#C1FFB8"}]
execute if score language Config matches 1 if score gamemode Config matches 1..2 if score recursionFix ItemsUpdate matches 0 if score minutes Timer matches 10.. if score seconds Timer matches ..9 run tellraw @a [{"text":"⚃","color":"#D60004"},{"text":" ⏵","color":"green"},{"text":" Bloque de Redstone","color":"#C1FFB8","bold":true},{"text":" conseguido en ","color":"#C1FFB8"},{"score":{"name":"hours","objective":"Timer"},"color":"green","bold":true},{"text":":","color":"green","bold":true},{"score":{"name":"minutes","objective":"Timer"},"color":"green","bold":true},{"text":":0","color":"green","bold":true},{"score":{"name":"seconds","objective":"Timer"},"color":"green","bold":true},{"text":"!","color":"#C1FFB8"}]
execute if score language Config matches 1 if score gamemode Config matches 1..2 if score recursionFix ItemsUpdate matches 0 if score minutes Timer matches 10.. if score seconds Timer matches 10.. run tellraw @a [{"text":"⚃","color":"#D60004"},{"text":" ⏵","color":"green"},{"text":" Bloque de Redstone","color":"#C1FFB8","bold":true},{"text":" conseguido en ","color":"#C1FFB8"},{"score":{"name":"hours","objective":"Timer"},"color":"green","bold":true},{"text":":","color":"green","bold":true},{"score":{"name":"minutes","objective":"Timer"},"color":"green","bold":true},{"text":":","color":"green","bold":true},{"score":{"name":"seconds","objective":"Timer"},"color":"green","bold":true},{"text":"!","color":"#C1FFB8"}]

#Fix recursion when in multiplayer
scoreboard players set recursionFix ItemsUpdate 1
execute if score gamemode Config matches 1..2 run advancement grant @a only ctmv:inventory_checks/minerals/redstone